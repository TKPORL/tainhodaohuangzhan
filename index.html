<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Tsinho-Nav 2.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
      background: #F2F2F7;
    }
    .app-header {
      padding: 12px;
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(16px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .app-title {
      font-weight: bold;
      font-size: 18px;
    }
    .search-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #fff;
      padding: 6px 12px;
      border-radius: 999px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .search-bar input {
      border: none;
      outline: none;
      font-size: 14px;
      flex: 1;
    }
    .section-card {
      margin: 16px;
      padding: 12px;
      background: rgba(255,255,255,0.85);
      border-radius: 16px;
      backdrop-filter: blur(20px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .section-card h3 {
      margin: 0 0 8px 0;
      font-size: 16px;
    }
    .sites-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 12px;
    }
    .site-item {
      padding: 10px;
      background: #fff;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }
    .site-item:hover {
      transform: scale(1.03);
      background: #f9f9f9;
    }
    .site-name {
      font-weight: 600;
      font-size: 14px;
    }
    .site-tags {
      font-size: 12px;
      color: #888;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="app-title">Tsinho-Nav 2.0</div>
    <div class="search-bar">
      üîç <input id="searchInput" type="text" placeholder="ÊêúÁ¥¢Á´ôÁÇπÊàñÊ†áÁ≠æ..." />
    </div>
    <button id="adminButton">üë§ ÁÆ°ÁêÜÂëò</button>
  </header>

  <main id="sectionsContainer"></main>

  <script>
    const STORAGE_KEY = "tsinho-nav-data";
    const DATA_VERSION = "2025-12-21-v1";

    let state = { sections: [], sites: [] };

    function loadData() {
      const version = localStorage.getItem(STORAGE_KEY + "-version");
      const raw = localStorage.getItem(STORAGE_KEY);

      if (!raw || version !== DATA_VERSION) {
        const defaultSections = [
          { id: "sec-tsinho", name: "TsinhoËµÑÊ∫êÂ∫ì", order: 1 },
          { id: "sec-netdisk", name: "ÁΩëÁõòÂêàÈõÜ", order: 2 }
        ];

        const defaultSites = [
          { id: "site-1", sectionId: "sec-tsinho", name: "ÂÖ®ËµÑÊ∫êÂêàÈõÜ", url: "https://yun.139.com/shareweb/#/w/i/2s2yiTvk1Gwfg", tags: ["ÂêàÈõÜ"], order: 1 },
          { id: "site-2", sectionId: "sec-tsinho", name: "ÂÆûÁî®ËΩØ‰ª∂", url: "https://yun.139.com/shareweb/#/w/i/2s2xQZqJ9TZfu", tags: ["ËΩØ‰ª∂"], order: 2 },
          { id: "site-3", sectionId: "sec-tsinho", name: "ËÄÅÂè∏Êú∫", url: "https://yun.139.com/shareweb/#/w/i/2s2xR5raFw08w", tags: ["ÁªÖÂ£´"], order: 3 },
          { id: "site-4", sectionId: "sec-tsinho", name: "V2ËäÇÁÇπ", url: "https://yun.139.com/shareweb/#/w/i/2s2xRbrCozatn", tags: ["ËäÇÁÇπ"], order: 4 },
          { id: "site-5", sectionId: "sec-tsinho", name: "ÁªÖÂ£´Â£ÅÁ∫∏", url: "https://yun.139.com/shareweb/#/w/i/2s2xR8rp0ysdz", tags: ["Â£ÅÁ∫∏"], order: 5 },
          { id: "site-6", sectionId: "sec-tsinho", name: "ÁΩëÁõòÂ∏Æ‰∏ãÁõÆÂΩï", url: "https://yun.139.com/shareweb/#/w/i/2s2xRksiedhqv", tags: ["ÁΩëÁõòÂ∏Æ‰∏ã"], order: 6 },
          { id: "site-7", sectionId: "sec-tsinho", name: "iOSÁ≠æÂêçËØÅ‰π¶", url: "https://yun.139.com/shareweb/#/w/i/2s2xR5raHuepx", tags: ["ËØÅ‰π¶"], order: 7 },
          { id: "site-8", sectionId: "sec-tsinho", name: "ËµÑÊ∫êÊõ¥Êñ∞ÊñáÊ°£", url: "https://yun.139.com/shareweb/#/w/i/2s2xQJpAR7Vqw", tags: ["Êõ¥Êñ∞ÈÄöÁü•"], order: 8 },
          { id: "site-9", sectionId: "sec-netdisk", name: "ÁΩëÁõòÂ∑•ÂÖ∑", url: "https://yun.139.com/shareweb/#/w/i/2s2xQZqJcfUm6", tags: ["Â∑•ÂÖ∑"], order: 1 },
          { id: "site-10", sectionId: "sec-netdisk", name: "ÁΩëÁõòÊïôÁ®ã", url: "https://dcnl6jstdzjw.feishu.cn/wiki/AgCBwxKSPinKYyko2qSc2SgmnMh", tags: ["ÊïôÁ®ã"], order: 2 }
        ];

        state.sections = defaultSections;
        state.sites = defaultSites;

        localStorage.setItem(STORAGE_KEY, JSON.stringify({ sections: state.sections, sites: state.sites }));
        localStorage.setItem(STORAGE_KEY + "-version", DATA_VERSION);
      } else {
        const parsed = JSON.parse(raw);
        state.sections = parsed.sections || [];
        state.sites = parsed.sites || [];
      }
    }

    function render() {
      const container = document.getElementById("sectionsContainer");
      container.innerHTML = "";
      const q = (document.getElementById("searchInput").value || "").trim().toLowerCase();

      const sections = state.sections.sort((a,b)=>a.order-b.order);
      for(const sec of sections){
        const card = document.createElement("div");
        card.className="section-card";
        card.innerHTML=`<h3>${sec.name}</h3>`;
        const grid=document.createElement("div");
        grid.className="sites-grid";
        const sites=state.sites.filter(s=>s.sectionId===sec.id).sort((a,b)=>a.order-b.order);
        for(const site of sites){
          if(q && !site.name.toLowerCase().includes(q) && !(site.tags||[]).some(t=>t.toLowerCase().includes(q))) continue;
          const item=document.createElement("div");
          item.className="site-item";
          item.innerHTML=`<div class='site-name'>${site.name}</div><div class='site-tags'>${site.tags.join(" ¬∑ ")}</div>`;
          item.onclick=()=>window.open(site.url,"_blank");
          grid.appendChild(item);
        }
        card.appendChild(grid);
        container.appendChild(card);
      }
    }

    document.getElementById("searchInput").addEventListener("input", ()=>render());

    document.addEventListener("DOMContentLoaded",()=>{
      loadData();
      render();
    });
  </script>
</body>
</html>